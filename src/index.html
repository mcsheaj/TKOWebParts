<!doctype html>
<html>

<!--
    Export any web part from a SharePoint page - https://chuvash.eu/2014/09/19/export-any-web-part-from-a-sharepoint-page/ by Anatoly Mironov
    -->

<head>
    <meta charset="utf-8">
    <title>Creating a CSS3 Slider</title>
</head>

<body>

    <div data-bind='visible: listTitle().length === 0' class="slider-init" style="display:none">
        Edit this web part and select a picture library to begin showing pictures.
    </div>
    <div 
        data-bind='widgetSettings: inEditMode() && configChanged(), event: { mouseover: mouseOver, mouseout: mouseOut }'
        class="image-slider-outer">
        <div 
            data-bind="visible: listTitle().length > 0 && images().length === 0" 
            class="slider-init" style="display:none">
            Click the plus sign to add some images to your library.
        </div>
        <div data-bind='visible: listTitle().length > 0' class="slider">
            <div 
                data-bind='foreach: images, visible: images().length > 0' 
                class="slider-wrapper">
                <div data-bind='slider: $root.selected() === $index()' class="slide">
                    <img data-bind='attr: { src: Url, alt: Title, "data-slide": $index() }' />
                    <div data-bind='visible: Title' class="caption">
                        <p data-bind='text: Title' class="caption"></p>
                        <p data-bind='text: Description' class="description"></p>
                    </div>
                </div>
            </div>
        </div>
        <div 
            data-bind='foreach: { data: images }, visible: listTitle().length > 0 && images().length > 0' 
            class="slider-nav">
            <a 
                data-bind='click: $root.select.bind($root, $index()), css: { current: $index() === $root.selected() }' 
                href="#"></a>
        </div>
        <div class="slider-menu">
            <div 
                data-bind='click: toggleDialog.bind($root, addDialog), visible: listTitle().length > 0'
                title="Add"class="slider-button add"></div>
            <div 
                data-bind='click: toggleDialog.bind($root, editDialog), visible: images().length > 0 && listTitle().length > 0' 
                title="Edit" class="slider-button edit"></div>
            <div 
                data-bind='click: toggleDialog.bind($root, deleteDialog), visible: images().length > 0 && listTitle().length > 0' 
                title="Delete" class="slider-button delete"></div>
            <div 
                data-bind='click: toggleDialog.bind($root, editSettings), visible: inEditMode()' 
                title="Settings" class="slider-button settings"></div>
        </div>
        <div 
            data-bind='toggleDialog: addDialog(), visible: images().length === 0' 
            class="addSliderImages modalDialog" style="display:none;">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, addDialog)' href="#" title="Close" class="close">X</a>
                <div 
                    data-bind='fileDropzone: { processFile: $root.createImage, complete: $root.uploadComplete }' 
                    class="dragandrophandler">
                    <div class="draganddropbusy" style="display:none">
                        &nbsp;
                    </div>
                    <div class="draganddroplabel">Drag & Drop Images Here...</div>
                </div>
            </div>
        </div>
        <div data-bind='toggleDialog: editDialog()' class="editSliderImage modalDialog" style="display:none">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, editDialog)' href="#" title="Close" class="close">X</a>
                <h2>Edit Image</h2>
                <span class="sliderFormLabel">Title</span>
                <input 
                    data-bind='value: $root.images().length > 0 ? $root.images()[selected()].Title : ""' 
                    type="text" class="titleInput" />
                <br />
                <span class="sliderFormLabel">Description</span>
                <textarea 
                    data-bind='value: $root.images().length > 0 ? $root.images()[selected()].Description : ""' 
                    rows="10" cols="55" class="descriptionInput"></textarea>
                <br />
                <button data-bind='click: updateImage' type="button" class="sliderButton editSave">Ok</button>
                <button data-bind='click: resetImage' type="button" class="sliderButton editReset">Cancel</button>
            </div>
        </div>
        <div data-bind='toggleDialog: deleteDialog()' class="deleteSliderImage modalDialog" style="display:none">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, deleteDialog)' href="#" title="Close" class="close">X</a>
                <h2>Delete Confirmation</h2>
                <p>Are you sure you want to delete the current image?</p>
                <button data-bind='click: deleteImage' type="button" class="sliderButton delete">Delete</button>
            </div>
        </div>
        <div data-bind='toggleDialog: editSettings()' class="editSettings modalDialog" style="display:none">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, editSettings)' href="#" title="Close" class="close">X</a>
                <h2>Edit Web Part Settings</h2>
                <div>
                    <span class="sliderFormLabel">List Title</span>
                    <input data-bind='value: listTitle' type="text" class="titleInput" />
                </div>
                <div>
                    <span class="sliderFormLabel">Interval</span>
                    <input data-bind='value: interval' type="text" class="input" />
                </div>
                <br />
                <button data-bind='click: settings.bind($root, true)' class="sliderButton editSave" type="button">Ok</button>
                <button data-bind='click: settings.bind($root, false)' class="sliderButton editReset" type="button">Cancel</button>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="/Style Library/tkoWebPart/pnp-ww.js" 
        ww-appname="ImageSlider" 
        ww-appbind="tkoWebPart.imageSlider.init"
        ww-appConfig='{ "listTitle": "", "interval": 10000 }' 
        ww-appscripts='[{"src": "~/tkoWebPart.js", "priority ":0}]'>
    </script>

</body>

</html>