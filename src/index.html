<!doctype html>
<html>

<!--
    Export any web part from a SharePoint page - https://chuvash.eu/2014/09/19/export-any-web-part-from-a-sharepoint-page/ by Anatoly Mironov
    -->

<head>
    <meta charset="utf-8">
    <title>Creating a CSS3 Slider</title>
</head>

<body>

    <div class="image-slider-outer" 
        data-bind="widgetSettings: inEditMode() && configChanged(), event: { mouseover: mouseOver, mouseout: mouseOut }">
        <div class="banner">&nbsp;</div>
        <div class="slider" data-bind='visible: images().length > 0' style="display:none;">
            <div class="slider-wrapper" data-bind='foreach: images'>
                <div class="slide" data-bind="slide: $root.selected() === $index()">
                    <img data-bind='attr: { src: Url, alt: Title, "data-slide": $index() }' />
                    <div class="caption" data-bind="visible: Title">
                        <p class="caption" data-bind='text: Title'></p>
                        <p class="description" data-bind='text: Description'></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="slider-nav" data-bind='foreach: { data: images }'>
            <a href="#" data-bind='click: $root.select.bind($root, $index()), css: { current: $index() === $root.selected() }'></a>
        </div>
        <div class="slider-menu" data-bind='visible: images().length > 0' style="display:none;">
            <div title="Add" data-bind='click: toggleDialog.bind($root, addDialog)' class='slider-button add'></div>
            <div title="Edit" data-bind='click: toggleDialog.bind($root, editDialog)' class='slider-button edit'></div>
            <div title="Delete" data-bind='click: toggleDialog.bind($root, deleteDialog)' class='slider-button delete'></div>
            <div title="Settings" data-bind='click: toggleDialog.bind($root, editSettings), visible: inEditMode()' class='slider-button settings'></div>
        </div>
        <div class="addSliderImages modalDialog" data-bind='toggleDialog: addDialog(), visible: images().length === 0' style="display:none;">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, addDialog)' href="#" title="Close" class="close">X</a>
                <div class="dragandrophandler" data-bind="fileDropzone: { processFile: $root.createImage, complete: $root.uploadComplete }">
                    <div class="draganddropbusy" style="display:none">
                        &nbsp;
                    </div>
                    <div class="draganddroplabel">Drag & Drop Images Here...</div>
                </div>
            </div>
        </div>
        <div class="editSliderImage modalDialog" data-bind='toggleDialog: editDialog()' style="display:none">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, editDialog)' href="#" title="Close" class="close">X</a>
                <h2>Edit Image</h2>
                <span class="sliderFormLabel">Title</span>
                <input type="text" class="titleInput" data-bind="value: $root.images().length > 0 ? $root.images()[selected()].Title : ''"/>
                <br />
                <span class="sliderFormLabel">Description</span>
                <textarea rows="10" cols="55" class="descriptionInput" data-bind="value: $root.images().length > 0 ? $root.images()[selected()].Description : ''"></textarea>
                <br />
                <button type="button" data-bind='click: updateImage' class="sliderButton editSave">Ok</button>
                <button type="button" data-bind='click: resetImage' class="sliderButton editReset">Cancel</button>
            </div>
        </div>
        <div class="deleteSliderImage modalDialog" data-bind='toggleDialog: deleteDialog()' style="display:none">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, deleteDialog)' href="#" title="Close" class="close">X</a>
                <h2>Delete Confirmation</h2>
                <p>Are you sure you want to delete the current image?</p>
                <button type="button" data-bind='click: deleteImage' class="sliderButton delete">Delete</button>
            </div>
        </div>
        <div class="editSettings modalDialog" data-bind='toggleDialog: editSettings()' style="display:none">
            <div class="modalDialog-inner">
                <a data-bind='click: toggleDialog.bind($root, editSettings)' href="#" title="Close" class="close">X</a>
                <h2>Edit Web Part Settings</h2>
                <span class="sliderFormLabel">List Title</span>
                <input type="text" class="titleInput" data-bind="value: listTitle"/>
                <br />
                <button type="button" data-bind='click: settings.bind($root, true)' class="sliderButton editSave">Ok</button>
                <button type="button" data-bind='click: settings.bind($root, false)' class="sliderButton editReset">Cancel</button>
            </div>
        </div>
        <script type='text/javascript' src='/Style Library/tkoWebPart/pnp-ww.js' 
            ww-appname='ImageSlider' 
            ww-appbind='tkoWebPart.imageSlider.init'
            ww-appConfig='{"listTitle": "Pictures"}' 
            ww-appscripts='[{"src": "/Style Library/tkoWebPart/tkoWebPart.js", "priority":0}]'>
        </script>
    </div>

</body>

</html>